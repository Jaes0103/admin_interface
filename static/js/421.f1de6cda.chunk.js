"use strict";(self.webpackChunkadmin_interface=self.webpackChunkadmin_interface||[]).push([[421],{7256:(e,s,a)=>{a.d(s,{A:()=>i});a(2483);var n=a(6723);const i=e=>{let{isOpen:s,message:a,onConfirm:i,onCancel:t,title:l="Confirmation",confirmText:r="Yes",cancelText:c="No"}=e;return s?(0,n.jsx)("div",{className:"confirmation-modal",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsx)("h2",{children:l}),(0,n.jsx)("p",{children:a}),(0,n.jsxs)("div",{className:"modal-buttons",children:[(0,n.jsx)("button",{onClick:i,className:"confirm-button",children:r}),(0,n.jsx)("button",{onClick:t,className:"cancel-button",children:c})]})]})}):null}},421:(e,s,a)=>{a.r(s),a.d(s,{default:()=>l});var n=a(2483),i=a(2718),t=a(6723);const l=()=>{const[e,s]=(0,n.useState)([]),[a,l]=(0,n.useState)(!1),[r,c]=(0,n.useState)({event_name:"",event_date:"",imgFile:null,vidFile:null,password:""}),[o,d]=(0,n.useState)(!1),[m,h]=(0,n.useState)(""),[v,x]=(0,n.useState)(""),[u,j]=(0,n.useState)("");(0,n.useEffect)((()=>{p()}),[]);const p=async()=>{d(!0);try{const e=await fetch("https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/events");if(!e.ok)throw new Error(`Failed to fetch events: ${e.status}`);const a=await e.json();console.log("Fetched Events:",a),s(a)}catch(m){console.error("Error fetching events:",m),h("Error fetching events. Please try again later.")}finally{d(!1)}},b=e=>{const{name:s,value:a,files:n}=e.target;n?c({...r,[s]:n[0]}):(c({...r,[s]:a}),"password"===s&&g(a))},g=e=>{let s="";s=e.length<6?"Too short":e.length<10?"Weak":e.match(/[A-Z]/)&&e.match(/[0-9]/)?"Strong":"Medium",j(s)},N=()=>{l(!a),a&&(c({event_name:"",event_date:"",imgFile:null,vidFile:null,password:""}),j(""))};return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)(i.A,{}),(0,t.jsxs)("div",{className:"events-list",children:[(0,t.jsx)("h2",{children:"Upcoming Events"}),o&&(0,t.jsx)("p",{children:"Loading events..."}),m&&(0,t.jsx)("p",{className:"error-message",children:m}),v&&(0,t.jsx)("p",{className:"success-message",children:v}),(0,t.jsx)("ul",{children:e.map((e=>(0,t.jsxs)("li",{children:[(0,t.jsx)("h3",{children:e.event_name}),(0,t.jsxs)("p",{children:["Date: ",new Date(e.event_date).toLocaleDateString()]}),console.log("Event:",e),e.imgurl&&(0,t.jsx)("img",{src:e.imgurl,alt:e.event_name,style:{width:"100px"},onError:()=>console.error(`Failed to load image from URL: ${e.imgurl}`)}),e.vidurl&&(0,t.jsxs)("video",{width:"100",controls:!0,children:[(0,t.jsx)("source",{src:e.vidurl,type:"video/mp4"}),"Your browser does not support the video tag."]})]},e.id)))}),(0,t.jsx)("button",{onClick:N,children:a?"Hide Event Form":"Create New Event"}),a&&(0,t.jsx)("div",{className:"modal-overlay",children:(0,t.jsxs)("div",{className:"modal",children:[(0,t.jsx)("h3",{children:"Create New Event"}),(0,t.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const s=new FormData;s.append("event_name",r.event_name),s.append("event_date",r.event_date),r.imgFile&&s.append("imgFile",r.imgFile),r.vidFile&&s.append("vidFile",r.vidFile),d(!0),h(""),x("");try{const e=await fetch("https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/create-events",{method:"POST",body:s});if(!e.ok){const s=await e.text();throw new Error(`Failed to create event: ${e.status} ${s}`)}x("Event created successfully!"),p(),c({event_name:"",event_date:"",imgFile:null,vidFile:null,password:""}),l(!1)}catch(m){console.error("Error during event submission:",m),h("Error creating event. Please try again later.")}finally{d(!1)}},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Event Name:"}),(0,t.jsx)("input",{type:"text",name:"event_name",value:r.event_name,onChange:b,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Event Date:"}),(0,t.jsx)("input",{type:"date",name:"event_date",value:r.event_date,onChange:b,required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Password:"}),(0,t.jsx)("input",{type:"password",name:"password",value:r.password,onChange:b}),r.password&&(0,t.jsxs)("p",{children:["Password Strength: ",u]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Image:"}),(0,t.jsx)("input",{type:"file",name:"imgFile",accept:"image/*",onChange:b}),r.imgFile&&(0,t.jsx)("img",{src:URL.createObjectURL(r.imgFile),alt:"Preview",style:{width:"100px",marginTop:"10px"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{children:"Video:"}),(0,t.jsx)("input",{type:"file",name:"vidFile",accept:"video/*",onChange:b}),r.vidFile&&(0,t.jsxs)("video",{width:"100",controls:!0,style:{marginTop:"10px"},children:[(0,t.jsx)("source",{src:URL.createObjectURL(r.vidFile),type:r.vidFile.type}),"Your browser does not support the video tag."]})]}),(0,t.jsx)("button",{type:"submit",disabled:o,children:o?"Creating...":"Create Event"}),(0,t.jsx)("button",{type:"button",onClick:N,children:"Cancel"})]})]})})]})]})}},2718:(e,s,a)=>{a.d(s,{A:()=>d});var n=a(2483),i=a(3376),t=a(9891),l=a(8938),r=a(7256),c=a(7321),o=a(6723);const d=()=>{const{logout:e}=(0,c.A)(),[s,a]=(0,n.useState)(!1),d=(0,i.Zp)();return(0,o.jsxs)("div",{className:"sidebar",children:[(0,o.jsx)("div",{className:"sidebar-header",children:(0,o.jsx)("h2",{children:"Admin"})}),(0,o.jsxs)("ul",{className:"sidebar-list",children:[(0,o.jsx)("li",{children:(0,o.jsxs)(t.N_,{to:"/dashboard",className:"sidebar-link",children:[(0,o.jsx)(l.$BV,{className:"sidebar-icon"})," Dashboard"]})}),(0,o.jsx)("li",{children:(0,o.jsxs)(t.N_,{to:"/reports",className:"sidebar-link",children:[(0,o.jsx)(l.t69,{className:"sidebar-icon"})," Reports"]})}),(0,o.jsx)("li",{children:(0,o.jsxs)(t.N_,{to:"/adopt-animal",className:"sidebar-link",children:[(0,o.jsx)(l.Mbv,{className:"sidebar-icon"})," Adoptions"]})}),(0,o.jsx)("li",{children:(0,o.jsxs)(t.N_,{to:"/animals",className:"sidebar-link",children:[(0,o.jsx)(l.O21,{className:"sidebar-icon"})," Animals"]})}),(0,o.jsx)("li",{children:(0,o.jsxs)(t.N_,{to:"/events",className:"sidebar-link",children:[(0,o.jsx)(l.bfZ,{className:"sidebar-icon"})," Events"]})}),(0,o.jsx)("li",{children:(0,o.jsxs)(t.N_,{to:"/rescuers",className:"sidebar-link",children:[(0,o.jsx)(l.YXz,{className:"sidebar-icon"})," Rescuers"]})}),(0,o.jsx)("li",{children:(0,o.jsxs)(t.N_,{to:"/maps",className:"sidebar-link",children:[(0,o.jsx)(l.A4L,{className:"sidebar-icon"})," Map"]})})]}),(0,o.jsx)("div",{className:"sidebar-footer",children:(0,o.jsxs)("button",{onClick:()=>{a(!0)},className:"sidebar-link logout-button",children:[(0,o.jsx)(l.axc,{className:"sidebar-icon"})," Logout"]})}),(0,o.jsx)(r.A,{isOpen:s,message:"Are you sure you want to log out?",onConfirm:()=>{e(),d("/"),alert("Successfully logged out!")},onCancel:()=>{a(!1)}})]})}}}]);
//# sourceMappingURL=421.f1de6cda.chunk.js.map