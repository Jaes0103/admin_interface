"use strict";(self.webpackChunkadmin_interface=self.webpackChunkadmin_interface||[]).push([[369],{348:(e,s,a)=>{a.d(s,{A:()=>r});var t=a(2483),o=a(6723);const r=e=>{let{src:s,alt:a}=e;const[r,n]=(0,t.useState)(!1),l=(0,t.useRef)(null);return(0,t.useEffect)((()=>{const e=new IntersectionObserver((s=>{s.forEach((s=>{s.isIntersecting&&(n(!0),e.unobserve(s.target))}))}),{threshold:.1});return l.current&&e.observe(l.current),()=>{l.current&&e.unobserve(l.current)}}),[]),(0,o.jsx)("img",{ref:l,src:r?s:"","data-src":s,alt:a,loading:"lazy",style:{opacity:r?1:.5,transition:"opacity 0.5s"}})}},8369:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var t=a(2483),o=a(3376),r=a(8826),n=a(9765),l=a(7266),i=a(1251),c=a(8371),p=a(4342);function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s=>{let[,a]=s;return a&&function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!function(e){return"string"===typeof e.main}(e))return!1;for(const a of s)if(!e.hasOwnProperty(a)||"string"!==typeof e[a])return!1;return!0}(a,e)}}var m=a(5635),u=a(292),f=a(1431);function h(e){return(0,f.Ay)("MuiIcon",e)}(0,u.A)("MuiIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var g=a(6723);const y=(0,c.Ay)("span",{name:"MuiIcon",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:a}=e;return[s.root,"inherit"!==a.color&&s[`color${(0,i.A)(a.color)}`],s[`fontSize${(0,i.A)(a.fontSize)}`]]}})((0,p.A)((e=>{let{theme:s}=e;return{userSelect:"none",width:"1em",height:"1em",overflow:"hidden",display:"inline-block",textAlign:"center",flexShrink:0,variants:[{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:s.typography.pxToRem(20)}},{props:{fontSize:"medium"},style:{fontSize:s.typography.pxToRem(24)}},{props:{fontSize:"large"},style:{fontSize:s.typography.pxToRem(36)}},{props:{color:"action"},style:{color:(s.vars||s).palette.action.active}},{props:{color:"disabled"},style:{color:(s.vars||s).palette.action.disabled}},{props:{color:"inherit"},style:{color:void 0}},...Object.entries(s.palette).filter(d()).map((e=>{let[a]=e;return{props:{color:a},style:{color:(s.vars||s).palette[a].main}}}))]}}))),b=t.forwardRef((function(e,s){const a=(0,m.b)({props:e,name:"MuiIcon"}),{baseClassName:t="material-icons",className:o,color:r="inherit",component:c="span",fontSize:p="medium",...d}=a,u={...a,baseClassName:t,color:r,component:c,fontSize:p},f=(e=>{const{color:s,fontSize:a,classes:t}=e,o={root:["root","inherit"!==s&&`color${(0,i.A)(s)}`,`fontSize${(0,i.A)(a)}`]};return(0,l.A)(o,h,t)})(u);return(0,g.jsx)(y,{as:c,className:(0,n.A)(t,"notranslate",f.root,o),ownerState:u,"aria-hidden":!0,ref:s,...d})}));b&&(b.muiName="Icon");const S=b;var v=a(4610),x=a(7321),N=a(348);const w=()=>{const{login:e}=(0,x.A)(),[s,a]=(0,t.useState)(""),[n,l]=(0,t.useState)(""),[i,c]=(0,t.useState)(!1),[p,d]=(0,t.useState)(""),[m,u]=(0,t.useState)(!1),[f,h]=(0,t.useState)(""),[y,b]=(0,t.useState)(!1),[w,j]=(0,t.useState)(!1),z=(0,o.Zp)();return(0,g.jsx)("div",{className:"Body-container",children:(0,g.jsxs)("div",{className:"login-container",children:[(0,g.jsx)(N.A,{src:v,alt:"Logo",className:"logo",width:150,height:50})," ",(0,g.jsx)("h2",{className:"login-title",children:m?"Forgot Password":"Log In"}),(0,g.jsx)("h3",{className:"login-title",children:"Welcome Back \ud83d\udc4b"}),p&&(0,g.jsx)("p",{className:"error-message",children:p}),f&&(0,g.jsx)("p",{className:"success-message",children:f}),m?(0,g.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),b(!0);try{await r.A.post("https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/password-reset-request-admin",{email:s});h("Password reset link has been sent to your email."),j(!0),d("")}catch(p){console.error("Forgot password error:",p.response?p.response.data:p.message),d(p.response?p.response.data.message:"Failed to send password reset link")}finally{b(!1)}},className:"login-form",children:[(0,g.jsx)("label",{className:"input-label",htmlFor:"email",children:"Enter your email"}),(0,g.jsx)("input",{id:"email",type:"email",placeholder:"Enter email",value:s,onChange:e=>a(e.target.value),className:"input-field",required:!0,disabled:y}),(0,g.jsx)("button",{type:"submit",className:"login-button",disabled:y||w,children:y?(0,g.jsx)("i",{className:"fas fa-spinner fa-spin"}):w?"Email Sent!":"Send Reset Link"}),(0,g.jsx)("span",{className:"forgot-password",onClick:()=>u(!1),children:"Back to Login"})]}):(0,g.jsxs)("form",{onSubmit:async a=>{a.preventDefault(),b(!0);try{const a=await r.A.post("https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/login",{email:s,password:n}),{token:t,authId:o,userData:l}=a.data;e(l,t),z("/dashboard")}catch(p){console.error("Login error:",p.response?p.response.data:p.message),d(p.response?p.response.data.message:"Failed to log in")}finally{b(!1)}},className:"login-form",children:[(0,g.jsx)("label",{className:"input-label",htmlFor:"email",children:"Email"}),(0,g.jsx)("input",{id:"email",type:"email",placeholder:"Enter email",value:s,onChange:e=>a(e.target.value),className:"input-field",required:!0,disabled:y}),(0,g.jsx)("label",{className:"input-label",htmlFor:"password",children:"Password"}),(0,g.jsxs)("div",{className:"password-container",children:[(0,g.jsx)("input",{id:"password",type:i?"text":"password",placeholder:"Enter password",value:n,onChange:e=>l(e.target.value),className:"input-field",required:!0,disabled:y}),(0,g.jsx)(S,{type:"button",onClick:()=>c(!i),className:"password-toggle",children:(0,g.jsx)("i",{className:"fas "+(i?"fa-eye-slash":"fa-eye")})})]}),(0,g.jsx)("button",{type:"submit",className:"login-button",disabled:y,children:y?(0,g.jsx)("i",{className:"fas fa-spinner fa-spin"}):"Log In"}),(0,g.jsx)("span",{className:"forgot-password",onClick:()=>u(!0),children:"Forgot Password?"})]})]})})}},4610:(e,s,a)=>{e.exports=a.p+"static/media/bantay_hayop_logo.888924f54098612cc445.png"}}]);
//# sourceMappingURL=369.be7bd1cc.chunk.js.map