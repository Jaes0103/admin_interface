"use strict";(self.webpackChunkadmin_interface=self.webpackChunkadmin_interface||[]).push([[14],{8014:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var n=a(2483),t=a(8826),l=a(8938),i=a(7256),r=a(2718);const o={};var d=a(6723);const c=e=>{let{isOpen:s,onClose:a,onApprove:n,adoptionFee:t,setAdoptionFee:l}=e;return s?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"modal-backdrop",onClick:a}),(0,d.jsx)("div",{className:"modal",children:(0,d.jsxs)("div",{className:"modal-content",children:[(0,d.jsx)("h3",{children:"Approve Adoption Request"}),(0,d.jsxs)("label",{children:["Adoption Fee:",(0,d.jsx)("input",{type:"number",value:t,onChange:e=>l(e.target.value),placeholder:"Enter adoption fee"})]}),(0,d.jsxs)("div",{className:"modal-actions",children:[(0,d.jsx)("button",{className:"modal-approve-button",onClick:()=>n(t),children:"Approve"}),(0,d.jsx)("button",{className:"modal-cancel-button",onClick:a,children:"Cancel"})]})]})})]}):null},h=()=>{const[e,s]=(0,n.useState)([]),[a,h]=(0,n.useState)(!0),[u,p]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),[j,b]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!1),[N,y]=(0,n.useState)(null),[f,A]=(0,n.useState)(""),[C,k]=(0,n.useState)(null),[S,q]=(0,n.useState)(!1),[_,w]=(0,n.useState)(null),[E,D]=(0,n.useState)(""),[F,R]=(0,n.useState)(null),[O,T]=(0,n.useState)(null),[z]=(0,n.useState)(!1),[I,B]=(0,n.useState)([]),[$,P]=(0,n.useState)(!1),[L,M]=(0,n.useState)(!1),[H,U]=(0,n.useState)(null),[X,Y]=(0,n.useState)(""),[Z,J]=(0,n.useState)({id:null,name:"",type:"",breed:"",age:"",size:"",personality:"",health_status:"",background:"",special_needs:"",shelter:"",img:null,imgurl:""}),[V,G]=(0,n.useState)(null),[K,Q]=(0,n.useState)(""),[W,ee]=(0,n.useState)(""),[se,ae]=(0,n.useState)(1);(0,n.useEffect)((()=>{(async()=>{try{const e="https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/adoptable-animals",a=await t.A.get(e);s(a.data.animals)}catch(e){console.error("Fetch error:",e),p("Error fetching adoptable animals")}finally{h(!1)}})(),(async()=>{try{const e="https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/adoption-requests",s=await t.A.get(e);console.log("Fetched adoption requests:",s.data.adoptionRequests),B(s.data.adoptionRequests)}catch(e){console.error("Error fetching adoption requests:",e),p("Error fetching adoption requests")}finally{h(!1)}})()}),[]);const ne=e=>{const{name:s,value:a}=e.target;J({...Z,[s]:a})},te=()=>{J({id:null,name:"",type:"",breed:"",age:"",size:"",personality:"",health_status:"",background:"",special_needs:"",shelter:"",img:null,imgurl:""}),b(!1)},le=()=>{te(),x(!m)},ie=Math.ceil(e.length/5),re=e.slice(5*(se-1),5*se);return a?(0,d.jsx)("p",{children:"Loading adoptable animals..."}):u?(0,d.jsx)("p",{children:u}):(0,d.jsxs)("div",{className:"adoptable-animals-container",children:[(0,d.jsx)(r.A,{}),(0,d.jsxs)("div",{className:"container",children:[(0,d.jsx)("h1",{children:"Adoptable Animals"}),(0,d.jsx)("button",{className:"add-animal-button",onClick:le,children:"Add Adoptable Animal"})]}),m&&(0,d.jsx)("div",{className:"dialog-overlay",children:(0,d.jsxs)("div",{className:"dialog-box",children:[(0,d.jsx)("span",{className:"close",onClick:le,children:"\xd7"}),(0,d.jsx)("h4",{children:j?"Edit Adoptable Animal":"Add Adoptable Animal"}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const a=new FormData;Object.keys(Z).forEach((e=>{a.append(e,Z[e])}));try{const e=j?`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/update-adoptable-animal/${Z.id}`:"https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/add-adoptable-animal",n=j?"put":"post",l=(await t.A[n](e,a,{headers:{"Content-Type":"multipart/form-data"}})).data;s(j?e=>e.map((e=>e.id===l.id?l:e)):e=>[...e,l]),te(),x(!1),ae(1)}catch(n){console.error("Error adding/updating animal:",n),p(j?"Error updating animal":"Error adding animal")}},children:[(0,d.jsxs)("div",{className:"form-grid",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Name:"}),(0,d.jsx)("input",{type:"text",name:"name",value:Z.name,onChange:ne,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Type:"}),(0,d.jsx)("input",{type:"text",name:"type",value:Z.type,onChange:ne,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Breed:"}),(0,d.jsx)("input",{type:"text",name:"breed",value:Z.breed,onChange:ne,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Age:"}),(0,d.jsx)("input",{type:"text",name:"age",value:Z.age,onChange:ne,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Size:"}),(0,d.jsx)("input",{type:"text",name:"size",value:Z.size,onChange:ne,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Personality:"}),(0,d.jsx)("input",{type:"text",name:"personality",value:Z.personality,onChange:ne,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Health Status:"}),(0,d.jsx)("input",{type:"text",name:"health_status",value:Z.health_status,onChange:ne,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Shelter:"}),(0,d.jsx)("input",{type:"text",name:"shelter",value:Z.shelter,onChange:ne,required:!0})]})]}),Z.imgurl&&(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Current Image:"}),(0,d.jsx)("img",{src:Z.imgurl,alt:Z.name,style:{width:"100px",height:"auto"}})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Image:"}),(0,d.jsx)("input",{type:"file",name:"img",accept:"image/*",onChange:e=>{J({...Z,img:e.target.files[0]})},required:!j})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Special Needs:"}),(0,d.jsx)("input",{type:"text",name:"special_needs",value:Z.special_needs,onChange:ne,required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"Background:"}),(0,d.jsx)("input",{type:"text",name:"background",value:Z.background,onChange:ne,required:!0})]}),(0,d.jsx)("button",{type:"submit",children:j?"Update Animal":"Add Animal"}),(0,d.jsx)("button",{type:"button",onClick:le,children:"Cancel"})]})]})}),g&&(0,d.jsx)(i.A,{isOpen:g,message:f,onConfirm:async()=>{if(console.log("Confirmed deletion for animal ID:",N),N){const e=`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/delete-adoptable-animal/${N}`;try{const a=await t.A.delete(e);console.log("Delete response:",a.data),200===a.status?(s((e=>e.filter((e=>e.id!==N)))),v(!1),y(null),w("Animal deleted successfully")):p(a.data.error||"Error deleting animal")}catch(u){console.error("Error confirming delete:",u),u.response?p(u.response.data.error||"Error deleting animal"):p("Network error or server did not respond")}}},onCancel:()=>{v(!1),y(null),p(null),w(null)},title:"Confirm Deletion"}),S&&(0,d.jsx)(o,{isOpen:S,message:E,onClose:()=>{q(!1),D("")}}),0===e.length?(0,d.jsx)("p",{children:"No adoptable animals available."}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("table",{className:"adoptable-animals-table",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"ID"}),(0,d.jsx)("th",{children:"Name"}),(0,d.jsx)("th",{children:"Type"}),(0,d.jsx)("th",{children:"Breed"}),(0,d.jsx)("th",{children:"Age"}),(0,d.jsx)("th",{children:"Size"}),(0,d.jsx)("th",{children:"Personality"}),(0,d.jsx)("th",{children:"Health Status"}),(0,d.jsx)("th",{children:"Background"}),(0,d.jsx)("th",{children:"Special Needs"}),(0,d.jsx)("th",{children:"Shelter"}),(0,d.jsx)("th",{children:"Image"}),(0,d.jsx)("th",{children:"Actions"})]})}),(0,d.jsx)("tbody",{children:re.map((e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:e.id}),(0,d.jsx)("td",{children:e.name}),(0,d.jsx)("td",{children:e.type}),(0,d.jsx)("td",{children:e.breed}),(0,d.jsx)("td",{children:e.age}),(0,d.jsx)("td",{children:e.size}),(0,d.jsx)("td",{children:e.personality}),(0,d.jsx)("td",{children:e.health_status}),(0,d.jsx)("td",{children:e.background}),(0,d.jsx)("td",{children:e.special_needs}),(0,d.jsx)("td",{children:e.shelter}),(0,d.jsx)("td",{children:(0,d.jsx)("img",{src:e.imgurl,alt:e.name,style:{width:"100px",height:"auto"}})}),(0,d.jsxs)("td",{children:[(0,d.jsx)("button",{onClick:()=>(e=>{J({...e,img:null}),b(!0),x(!0)})(e),children:(0,d.jsx)(l.uO9,{})}),(0,d.jsx)("button",{onClick:()=>{return s=e.id,console.log("Deleting animal with ID:",s),y(s),A("Are you sure you want to delete this animal? This action cannot be undone."),void v(!0);var s},children:(0,d.jsx)(l.qbC,{})}),e.adoptionRequests&&e.adoptionRequests.map((e=>(0,d.jsx)("div",{children:(0,d.jsx)("button",{onClick:()=>(e=>{k(e),A("Are you sure you want to delete this adoption request? This action cannot be undone."),v(!0)})(e.id),children:"Delete Request"})},e.id)))]})]},e.id)))})]}),(0,d.jsxs)("div",{className:"pagination",children:[(0,d.jsx)("button",{onClick:()=>{se>1&&ae((e=>e-1))},disabled:1===se,children:(0,d.jsx)(l._Jj,{})}),(0,d.jsxs)("span",{children:["Page ",se," of ",ie]}),(0,d.jsx)("button",{onClick:()=>{se<ie&&ae((e=>e+1))},disabled:se===ie,children:(0,d.jsx)(l.X6T,{})})]})]}),(0,d.jsxs)("div",{className:"table-container",children:[(0,d.jsx)("h2",{children:"Adoption Requests"}),(0,d.jsxs)("table",{className:"adoptable-animals-table",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:"Name"}),(0,d.jsx)("th",{children:"Contact Number"}),(0,d.jsx)("th",{children:"Animal Name"}),(0,d.jsx)("th",{children:"Status"}),(0,d.jsx)("th",{children:"Adopt Fee"}),(0,d.jsx)("th",{children:"Actions"})]})}),(0,d.jsx)("tbody",{children:I.length>0?I.map((e=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:e.reporter_name}),(0,d.jsx)("td",{children:e.phone_number}),(0,d.jsx)("td",{children:e.name}),(0,d.jsx)("td",{children:e.status}),(0,d.jsx)("td",{children:e.adoption_fee}),(0,d.jsx)("td",{children:(0,d.jsx)("button",{className:"approve-button",onClick:()=>(e=>{console.log("Request to approve:",e),U(e),Y(""),M(!0)})(e),children:"Approve"})})]},e.id))):(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"6",children:"No adoption requests found."})})})]})]}),(0,d.jsx)(c,{isOpen:L,onClose:()=>M(!1),onApprove:async e=>{if(console.log("Approving request ID:",null===H||void 0===H?void 0:H.id),H&&H.id)try{console.log(`Sending PUT request to: /api/admin/adoption_requests/${H.id}`);const s=await t.A.put(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/adoption-requests/${H.id}`,{adoption_fee:parseFloat(e)});console.log("Approval response:",s.data)}catch(u){console.error("Error approving request:",u)}finally{M(!1),U(null),Y("")}else console.error("No request to approve or request ID is missing")},adoptionFee:X,setAdoptionFee:Y})]})}},7256:(e,s,a)=>{a.d(s,{A:()=>t});a(2483);var n=a(6723);const t=e=>{let{isOpen:s,message:a,onConfirm:t,onCancel:l,title:i="Confirmation",confirmText:r="Yes",cancelText:o="No"}=e;return s?(0,n.jsx)("div",{className:"confirmation-modal",children:(0,n.jsxs)("div",{className:"modal-content",children:[(0,n.jsx)("h2",{children:i}),(0,n.jsx)("p",{children:a}),(0,n.jsxs)("div",{className:"modal-buttons",children:[(0,n.jsx)("button",{onClick:t,className:"confirm-button",children:r}),(0,n.jsx)("button",{onClick:l,className:"cancel-button",children:o})]})]})}):null}},2718:(e,s,a)=>{a.d(s,{A:()=>c});var n=a(2483),t=a(3376),l=a(9891),i=a(8938),r=a(7256),o=a(7321),d=a(6723);const c=()=>{const{logout:e}=(0,o.A)(),[s,a]=(0,n.useState)(!1),c=(0,t.Zp)();return(0,d.jsxs)("div",{className:"sidebar",children:[(0,d.jsx)("div",{className:"sidebar-header",children:(0,d.jsx)("h2",{children:"Admin"})}),(0,d.jsxs)("ul",{className:"sidebar-list",children:[(0,d.jsx)("li",{children:(0,d.jsxs)(l.N_,{to:"/dashboard",className:"sidebar-link",children:[(0,d.jsx)(i.$BV,{className:"sidebar-icon"})," Dashboard"]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(l.N_,{to:"/reports",className:"sidebar-link",children:[(0,d.jsx)(i.t69,{className:"sidebar-icon"})," Reports"]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(l.N_,{to:"/adopt-animal",className:"sidebar-link",children:[(0,d.jsx)(i.Mbv,{className:"sidebar-icon"})," Adoptions"]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(l.N_,{to:"/animals",className:"sidebar-link",children:[(0,d.jsx)(i.O21,{className:"sidebar-icon"})," Animals"]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(l.N_,{to:"/events",className:"sidebar-link",children:[(0,d.jsx)(i.bfZ,{className:"sidebar-icon"})," Events"]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(l.N_,{to:"/rescuers",className:"sidebar-link",children:[(0,d.jsx)(i.YXz,{className:"sidebar-icon"})," Rescuers"]})}),(0,d.jsx)("li",{children:(0,d.jsxs)(l.N_,{to:"/maps",className:"sidebar-link",children:[(0,d.jsx)(i.A4L,{className:"sidebar-icon"})," Map"]})})]}),(0,d.jsx)("div",{className:"sidebar-footer",children:(0,d.jsxs)("button",{onClick:()=>{a(!0)},className:"sidebar-link logout-button",children:[(0,d.jsx)(i.axc,{className:"sidebar-icon"})," Logout"]})}),(0,d.jsx)(r.A,{isOpen:s,message:"Are you sure you want to log out?",onConfirm:()=>{e(),c("/"),alert("Successfully logged out!")},onCancel:()=>{a(!1)}})]})}}}]);
//# sourceMappingURL=14.eaf62dad.chunk.js.map