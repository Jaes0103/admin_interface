"use strict";(self.webpackChunkadmin_interface=self.webpackChunkadmin_interface||[]).push([[831],{7527:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var s=t(2483),n=t(8826),i=t(3376),d=t(940),l=(t(7626),t(6723));const r=()=>{const e=(0,i.Zp)(),{id:a}=(0,i.g)(),[t,r]=(0,s.useState)(null),[c,o]=(0,s.useState)([]),[h,u]=(0,s.useState)([]),[x,p]=(0,s.useState)(!0),[j,m]=(0,s.useState)(null),[b,y]=(0,s.useState)([]),[v,g]=(0,s.useState)(!1),[f,k]=(0,s.useState)(null),[C,_]=(0,s.useState)(null),[D,S]=(0,s.useState)({checkupDate:(0,d.A)(new Date,"yyyy-MM-dd"),healthStatus:"",labResults:"",nextCheckupDate:"",observations:""}),[A,N]=(0,s.useState)(!1),[w,M]=(0,s.useState)(!1),[q,E]=(0,s.useState)(null),[$,R]=(0,s.useState)(null),[F,O]=(0,s.useState)(!1),[I,H]=(0,s.useState)(null),L=(0,s.useCallback)((async()=>{p(!0);try{const e=await n.A.get(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}`);console.log("Fetched animal details:",e.data),r(e.data.animal||{}),o(e.data.healthRecords||[]),m(null)}catch(e){console.error(e),m({message:"Error fetching animal details",details:e.response?e.response.data:e.message})}finally{p(!1)}}),[a]),B=(0,s.useCallback)((async()=>{if(0!==c.length)try{const e=await n.A.get(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}/medications`);console.log("Fetched medications:",e.data),u(e.data||[])}catch(e){console.error(e),m({message:"Error fetching medications",details:e.response?e.response.data:e.message})}}),[a,c]),T=(0,s.useCallback)((async e=>{if(console.log("Fetching observations for Animal ID:",e),e)try{const a=await n.A.get(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${e}/observations`);console.log("Fetched observations:",a.data),y(a.data||[])}catch(a){console.error("Error fetching observations:",a),m({message:"Error fetching observations",details:a.response?a.response.data:a.message})}}),[a]);(0,s.useEffect)((()=>{a?L():(m({message:"Invalid animal ID"}),p(!1))}),[a,L]),(0,s.useEffect)((()=>{B()}),[c,B]),(0,s.useEffect)((()=>{$&&(console.log("Fetching observations for selected health record ID:",$),T($))}),[$,T]),(0,s.useEffect)((()=>{c.length>0&&R(c[0].id)}),[c]);const z=e=>{const{name:a,value:t}=e.target;E((e=>({...e,[a]:t})))};(0,s.useEffect)((()=>{a?L():(m({message:"Invalid animal ID"}),p(!1))}),[a,L]);const U=e=>{S({...D,[e.target.name]:e.target.value})},Y=e=>{k({...f,[e.target.name]:e.target.value})},J=async()=>{if(q&&a&&$)try{q.id?await n.A.put(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}/medications/${q.id}`,{medication_name:q.medication_name,dosage:q.dosage,frequency:q.frequency,status:q.status,start_date:q.start_date,end_date:q.end_date}):await n.A.post(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}/medications`,{medication_name:q.medication_name,dosage:q.dosage,frequency:q.frequency,status:q.status,start_date:q.start_date,end_date:q.end_date}),await L(),M(!1)}catch(e){m({message:"Error updating medications",details:e.response?e.response.data:e.message})}};return x?(0,l.jsx)("div",{children:"Loading animal details..."}):j?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:j.message}),j.details&&(0,l.jsx)("div",{className:"error-details",children:"string"===typeof j.details?j.details:JSON.stringify(j.details)})]}):(0,l.jsxs)("div",{className:"animal-details-page",children:[(0,l.jsx)("button",{onClick:()=>e("/animals"),children:"Back to Animal List"}),(0,l.jsxs)("div",{className:"animal-box",children:[(0,l.jsx)("h1",{children:"Animal Details"}),t.imgurl?(0,l.jsx)("img",{src:t.imgurl,alt:t.name,className:"animal-details-image"}):(0,l.jsx)("div",{className:"no-image-placeholder",children:"No Image Available"}),(0,l.jsx)("h2",{children:t.name}),(0,l.jsxs)("div",{className:"animal-details-container",children:[(0,l.jsxs)("div",{className:"animal-details-column",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Type:"})," ",t.type]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Breed:"})," ",t.breed]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Age:"})," ",t.age]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Size:"})," ",t.size]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Birthdate:"})," ",new Date(t.birthdate).toLocaleDateString()]})]}),(0,l.jsxs)("div",{className:"animal-details-column",children:[(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Location:"})," ",t.location]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Background:"})," ",t.background]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Personality:"})," ",t.personality]}),(0,l.jsxs)("p",{children:[(0,l.jsx)("strong",{children:"Status:"})," ",t.status]})]})]}),(0,l.jsx)("h3",{children:"Health Records"}),0===c.length?(0,l.jsx)("p",{children:"No health records available."}):(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Checkup Date"}),(0,l.jsx)("th",{children:"Health Status"}),(0,l.jsx)("th",{children:"Lab Results"}),(0,l.jsx)("th",{children:"Next Checkup Date"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:c.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,d.A)(new Date(e.checkup_date),"MM/dd/yyyy")}),(0,l.jsx)("td",{children:e.health_status}),(0,l.jsx)("td",{children:e.lab_results}),(0,l.jsx)("td",{children:(0,d.A)(new Date(e.next_checkup_date),"MM/dd/yyyy")}),(0,l.jsxs)("td",{children:[(0,l.jsx)("button",{onClick:()=>{R(e.id),N(!0),S({checkupDate:(0,d.A)(new Date(e.checkup_date),"yyyy-MM-dd"),healthStatus:e.health_status,labResults:e.lab_results,nextCheckupDate:(0,d.A)(new Date(e.next_checkup_date),"yyyy-MM-dd")})},children:(0,l.jsx)("i",{className:"fa fa-pencil"})}),(0,l.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this health record? This action cannot be undone."))try{await n.A.delete(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}/health-records/${e}`),await L()}catch(t){m({message:"Error deleting health record",details:t.response?t.response.data:t.message})}})(e.id),children:(0,l.jsx)("i",{className:"fa fa-trash"})})]})]},e.id)))})]}),(0,l.jsx)("button",{onClick:()=>{N(!0),R(null),S({checkupDate:(0,d.A)(new Date,"yyyy-MM-dd"),healthStatus:"",labResults:"",nextCheckupDate:""})},children:"Update Health Record"}),A&&(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-box",children:[(0,l.jsx)("h4",{children:$?"Edit Health Record":"Add Health Record"})," ",(0,l.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await(async e=>{try{e?await n.A.put(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}/health-records/${e}`,{health_status:D.healthStatus,checkup_date:D.checkupDate,lab_results:D.labResults,next_checkup_date:D.nextCheckupDate}):await n.A.post(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}/health-records`,{health_status:D.healthStatus,checkup_date:D.checkupDate,lab_results:D.labResults,next_checkup_date:D.nextCheckupDate}),await L(),N(!1)}catch(t){m({message:"Error updating health record",details:t.response?t.response.data:t.message})}})($)},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Checkup Date"}),(0,l.jsx)("input",{type:"date",name:"checkupDate",value:D.checkupDate,onChange:U,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Health Status"}),(0,l.jsx)("input",{type:"text",name:"healthStatus",value:D.healthStatus,onChange:U,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Lab Results"}),(0,l.jsx)("input",{type:"text",name:"labResults",value:D.labResults,onChange:U})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Next Checkup Date"}),(0,l.jsx)("input",{type:"date",name:"nextCheckupDate",value:D.nextCheckupDate,onChange:U})]}),(0,l.jsx)("button",{type:"submit",children:"Save"}),(0,l.jsx)("button",{type:"button",onClick:()=>N(!1),children:"Cancel"})]})]})}),(0,l.jsx)("h3",{children:"Medications"}),0===h.length?(0,l.jsx)("p",{children:"No medications available."}):(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Medication Name"}),(0,l.jsx)("th",{children:"Dosage"}),(0,l.jsx)("th",{children:"Frequency"}),(0,l.jsx)("th",{children:"Status"}),(0,l.jsx)("th",{children:"Date Started"}),(0,l.jsx)("th",{children:"Date Ended"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsx)("tbody",{children:h.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.medication_name}),(0,l.jsx)("td",{children:e.dosage}),(0,l.jsx)("td",{children:e.frequency}),(0,l.jsx)("td",{children:e.status}),(0,l.jsx)("td",{children:(0,d.A)(new Date(e.start_date),"MM/dd/yyyy")}),(0,l.jsx)("td",{children:e.end_date?(0,d.A)(new Date(e.end_date),"MM/dd/yyyy"):"N/A"}),(0,l.jsxs)("td",{children:[(0,l.jsx)("button",{onClick:()=>{E(e),M(!0)},children:(0,l.jsx)("i",{className:"fa fa-pencil"})}),(0,l.jsx)("button",{onClick:()=>{return a=e.id,H(a),void O(!0);var a},children:(0,l.jsx)("i",{className:"fa fa-trash"})})]})]},e.id)))})]}),(0,l.jsx)("button",{onClick:()=>{M(!0),E({})},children:"Add Medication"}),F&&(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-box",children:[(0,l.jsx)("h4",{children:"Confirm Deletion"}),(0,l.jsx)("p",{children:"Are you sure you want to delete this medication? This action cannot be undone."}),(0,l.jsx)("button",{onClick:async()=>{if(I)try{await n.A.delete(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}/medications/${I}`),await B()}catch(e){m({message:"Error deleting medication",details:e.response?e.response.data:e.message})}finally{O(!1),H(null)}},children:"Yes, Delete"}),(0,l.jsx)("button",{onClick:()=>O(!1),children:"Cancel"})]})}),w&&(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-box",children:[(0,l.jsx)("h4",{children:"Add Medication"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),J()},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Medication Name"}),(0,l.jsx)("input",{type:"text",name:"medication_name",value:q.medication_name||"",onChange:z,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Dosage"}),(0,l.jsx)("input",{type:"text",name:"dosage",value:q.dosage||"",onChange:z,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Frequency"}),(0,l.jsx)("input",{type:"text",name:"frequency",value:q.frequency||"",onChange:z,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Status"}),(0,l.jsx)("input",{type:"text",name:"status",value:q.status||"",onChange:z,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Start Date"}),(0,l.jsx)("input",{type:"date",name:"start_date",value:q.start_date||"",onChange:z,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"End Date"}),(0,l.jsx)("input",{type:"date",name:"end_date",value:q.end_date||"",onChange:z})]}),(0,l.jsx)("button",{type:"submit",children:"Save"}),(0,l.jsx)("button",{type:"button",onClick:()=>M(!1),children:"Cancel"})]})]})}),w&&(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-box",children:[(0,l.jsx)("h4",{children:"Add Medication"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),J()},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Medication Name"}),(0,l.jsx)("input",{type:"text",name:"medication_name",value:q.medication_name||"",onChange:z,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Dosage"}),(0,l.jsx)("input",{type:"text",name:"dosage",value:q.dosage||"",onChange:z,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Frequency"}),(0,l.jsx)("input",{type:"text",name:"frequency",value:q.frequency||"",onChange:z,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Status"}),(0,l.jsx)("input",{type:"text",name:"status",value:q.status||"",onChange:z,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Start Date"}),(0,l.jsx)("input",{type:"date",name:"start_date",value:q.start_date||"",onChange:z,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"End Date"}),(0,l.jsx)("input",{type:"date",name:"end_date",value:q.end_date||"",onChange:z})]}),(0,l.jsx)("button",{type:"submit",children:"Save"}),(0,l.jsx)("button",{type:"button",onClick:()=>M(!1),children:"Cancel"})]})]})}),(0,l.jsx)("h3",{children:"Observations"}),0===b.length?(0,l.jsx)("p",{children:"No observations available."}):(0,l.jsxs)("table",{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Date"}),(0,l.jsx)("th",{children:"Observation"}),(0,l.jsx)("th",{children:"Actions"})]})}),(0,l.jsxs)("tbody",{children:[b.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:e.observation_date?(0,d.A)(new Date(e.observation_date),"MM/dd/yyyy"):"No Date Available"}),(0,l.jsx)("td",{children:e.note}),(0,l.jsxs)("td",{children:[(0,l.jsx)("button",{onClick:()=>(e=>{console.log("Editing Observation:",e),k(e),g(!0)})(e),children:(0,l.jsx)("i",{className:"fa fa-pencil"})}),(0,l.jsx)("button",{onClick:()=>{return a=e.id,_(a),void O(!0);var a},children:(0,l.jsx)("i",{className:"fa fa-trash"})})]})]},e.id))),F&&(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-box",children:[(0,l.jsx)("h4",{children:"Confirm Deletion"}),(0,l.jsx)("p",{children:"Are you sure you want to delete this observation? This action cannot be undone."}),(0,l.jsx)("button",{onClick:async()=>{try{await n.A.delete(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}/observations/${C}`),await L(),O(!1),_(null)}catch(e){m({message:"Error deleting observation",details:e.response?e.response.data:e.message})}},children:"Yes, Delete"}),(0,l.jsx)("button",{onClick:()=>O(!1),children:"Cancel"})]})})]})]}),(0,l.jsx)("button",{onClick:()=>{k({}),g(!0)},children:"Add Observation"}),v&&(0,l.jsx)("div",{className:"dialog-overlay",children:(0,l.jsxs)("div",{className:"dialog-box",children:[(0,l.jsx)("h4",{children:f.id?"Edit Observation":"Add Observation"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{if(f)try{f.id?await n.A.put(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}/observations/${f.id}`,{note:f.note,observation_date:f.observation_date}):await n.A.post(`https://bantayhayopdavao-7bbe97a0f615.herokuapp.com/api/admin/animals/${a}/observations`,{note:f.note,observation_date:f.observation_date}),await T(a),g(!1)}catch(e){console.error("Error details:",e),m({message:"Error updating observation",details:e.response?e.response.data:e.message})}})()},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Observation"}),(0,l.jsx)("input",{type:"text",name:"note",value:f.note||"",onChange:Y,required:!0})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{children:"Date"}),(0,l.jsx)("input",{type:"date",name:"observation_date",value:f.observation_date?(0,d.A)(new Date(f.observation_date),"yyyy-MM-dd"):"",onChange:Y,required:!0})]}),(0,l.jsx)("button",{type:"submit",children:f.id?"Update":"Save"}),(0,l.jsx)("button",{type:"button",onClick:()=>g(!1),children:"Cancel"})]})]})})]})]})}}}]);
//# sourceMappingURL=831.a9df7cfc.chunk.js.map